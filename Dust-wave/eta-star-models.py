TAB_OIII_MV=[["ST", "T", "log L", "R", "M", "Gamma", "Vesc", "2.6 Vesc", "Mdot", "Lw", "eta"], ["O3", 42942, 5.92, 16.57, 58.62, 0.3251, 957, 2488, -5.18, 3373.9, 0.9775], ["O4", 41486, 5.82, 15.83, 48.8, 0.3102, 903, 2348, -5.3, 2279.5, 0.881], ["O5", 39507, 5.7, 15.26, 41.48, 0.2769, 870, 2262, -5.49, 1365.9, 0.7224], ["O5.5", 38003, 5.63, 15.13, 38.92, 0.2512, 859, 2233, -5.63, 964.3, 0.607], ["O6", 36673, 5.56, 14.97, 36.38, 0.2287, 847, 2202, -5.77, 679.3, 0.5095], ["O6.5", 35644, 5.49, 14.74, 33.68, 0.2103, 834, 2168, -5.9, 488.2, 0.4369], ["O7", 34638, 5.43, 14.51, 31.17, 0.1979, 814, 2116, -6.02, 352.8, 0.3714], ["O7.5", 33487, 5.36, 14.34, 29.06, 0.1806, 799, 2077, -6.17, 240.6, 0.3032], ["O8", 32573, 5.3, 14.11, 26.89, 0.17, 779, 2025, -6.29, 173.5, 0.2575], ["O8.5", 31689, 5.24, 13.88, 24.84, 0.1603, 758, 1971, -6.41, 124.7, 0.2183], ["O9", 30737, 5.17, 13.69, 23.07, 0.1469, 744, 1934, -6.56, 85.0, 0.1781], ["O9.5", 30231, 5.12, 13.37, 21.04, 0.1436, 721, 1875, -6.65, 64.9, 0.1575]]
TAB_OI_MV=[["ST", "T", "log L", "R", "M", "Gamma", "Vesc", "2.6 Vesc", "Mdot", "Lw", "eta"], ["O3", 42551, 6.0, 18.47, 66.89, 0.3426, 955, 2483, -5.08, 4230.5, 1.0216], ["O4", 40702, 5.94, 18.91, 58.03, 0.3439, 880, 2288, -5.14, 3128.6, 0.9413], ["O5", 38520, 5.87, 19.48, 50.87, 0.3339, 818, 2127, -5.25, 2098.8, 0.7981], ["O5.5", 37070, 5.82, 19.92, 48.29, 0.3135, 801, 2083, -5.35, 1598.9, 0.6966], ["O6", 35747, 5.78, 20.33, 45.78, 0.3016, 776, 2018, -5.44, 1219.8, 0.6015], ["O6.5", 34654, 5.74, 20.68, 43.1, 0.2922, 752, 1955, -5.52, 952.2, 0.5314], ["O7", 33326, 5.69, 21.14, 40.91, 0.2743, 734, 1908, -5.64, 688.0, 0.4414], ["O7.5", 31913, 5.64, 21.69, 39.17, 0.2554, 717, 1864, -5.78, 475.7, 0.3505], ["O8", 31009, 5.6, 22.03, 36.77, 0.2481, 695, 1807, -5.87, 363.4, 0.3029], ["O8.5", 30504, 5.58, 22.2, 33.9, 0.257, 660, 1716, -5.89, 312.9, 0.2876], ["O9", 29569, 5.54, 22.6, 31.95, 0.2487, 639, 1661, -6.0, 227.6, 0.237], ["O9.5", 28430, 5.49, 23.11, 30.41, 0.2329, 623, 1620, -6.15, 153.3, 0.1836]]
TAB_MM_V=[["M", "log L", "Vw", "log Mdot", "Lw", "eta"], [100, 6.11, 635, -4.97, 356.4, 0.26], [100, 6.11, 1548, -5.72, 376.7, 0.11], [193, 6.56, 610, -4.18, 2028.1, 0.55], [489, 7.11, 298, -3.19, 4730.1, 0.74], [550, 7.17, 111, -3.21, 626.7, 0.23]]
TAB_OV_MV=[["ST", "T", "log L", "R", "M", "Gamma", "Vesc", "2.6 Vesc", "Mdot", "Lw", "eta"], ["O3", 44616, 5.83, 13.84, 58.34, 0.2656, 1090, 2834, -5.37, 2826.4, 0.8845], ["O4", 43419, 5.68, 12.31, 46.16, 0.2376, 1048, 2725, -5.57, 1648.8, 0.758], ["O5", 41540, 5.51, 11.08, 37.28, 0.1989, 1018, 2647, -5.83, 855.0, 0.5985], ["O5.5", 40062, 5.41, 10.61, 34.17, 0.1724, 1012, 2631, -6.01, 558.1, 0.4948], ["O6", 38151, 5.3, 10.23, 31.73, 0.1441, 1007, 2618, -6.23, 332.9, 0.3822], ["O6.5", 36826, 5.2, 9.79, 29.02, 0.1251, 995, 2587, -6.43, 205.1, 0.3], ["O7", 35531, 5.1, 9.37, 26.52, 0.1088, 981, 2551, -6.62, 128.8, 0.2404], ["O7.5", 34419, 5.0, 8.94, 24.15, 0.0949, 968, 2517, -6.82, 79.1, 0.1884], ["O8", 33383, 4.9, 8.52, 21.95, 0.0829, 955, 2483, -7.02, 48.6, 0.1477], ["O8.5", 32522, 4.82, 8.11, 19.82, 0.0764, 929, 2415, -7.17, 32.5, 0.1222], ["O9", 31524, 4.72, 7.73, 18.03, 0.0667, 914, 2376, -7.37, 19.9, 0.0955], ["O9.5", 30488, 4.62, 7.39, 16.46, 0.058, 899, 2337, -7.59, 11.6, 0.0713]]
TAB_OBV_S=[["ST", "LC", "log L", "Mdot", "V", "Lw", "eta"], ["O3", "V", 5.84, 3.1, 3160, 2553.7, 0.7], ["O3.5", "V", 5.76, 2.5, 3080, 1956.5, 0.66], ["O4", "V", 5.67, 2.0, 2990, 1475.1, 0.63], ["O4.5", "V", 5.58, 1.6, 2870, 1087.2, 0.6], ["O5", "V", 5.49, 1.3, 2760, 817.0, 0.57], ["O5.5", "V", 5.41, 1.0, 2650, 579.3, 0.51], ["O6", "V", 5.32, 0.8, 2560, 432.5, 0.48], ["O6.5", "V", 5.23, 0.6, 2460, 299.5, 0.43], ["O7", "V", 5.14, 0.4, 2320, 177.6, 0.33], ["O7.5", "V", 5.05, 0.35, 2210, 141.0, 0.34], ["O8", "V", 4.96, 0.26, 2100, 94.6, 0.3], ["O8.5", "V", 4.86, 0.22, 1960, 69.7, 0.29], ["O9", "V", 4.77, 0.18, 1820, 49.2, 0.28], ["O9.5", "V", 4.68, 0.15, 1660, 34.1, 0.26], ["B0", "V", 4.57, 0.12, 1510, 22.6, 0.24], ["B0.5", "V", 4.47, 0.1, 1460, 17.6, 0.24], ["B1", "V", 4.37, 0.08, 1180, 9.2, 0.2], ["B1.5", "V", 4.28, 0.06, 960, 4.6, 0.15], ["B2", "V", 4.19, 0.05, 750, 2.3, 0.12]]
TAB_OBIII_S=[["ST", "LC", "log L", "Mdot", "V", "Lw", "eta"], ["O3", "III", 5.96, 6.5, 3160, 5354.6, 1.11], ["O3.5", "III", 5.91, 5.5, 3080, 4304.3, 1.03], ["O4", "III", 5.85, 4.7, 2990, 3466.4, 0.98], ["O4.5", "III", 5.79, 4.0, 2870, 2718.1, 0.92], ["O5", "III", 5.73, 3.4, 2760, 2136.7, 0.86], ["O5.5", "III", 5.67, 2.7, 2650, 1564.2, 0.76], ["O6", "III", 5.61, 2.2, 2560, 1189.4, 0.68], ["O6.5", "III", 5.54, 1.8, 2460, 898.6, 0.63], ["O7", "III", 5.48, 1.5, 2320, 666.0, 0.57], ["O7.5", "III", 5.42, 1.2, 2210, 483.5, 0.5], ["O8", "III", 5.35, 0.8, 2100, 291.0, 0.37], ["O8.5", "III", 5.28, 0.7, 1960, 221.8, 0.36], ["O9", "III", 5.21, 0.5, 1820, 136.6, 0.28], ["O9.5", "III", 5.15, 0.4, 1660, 90.9, 0.23], ["B0", "III", 5.08, 0.3, 1510, 56.4, 0.19], ["B0.5", "III", 5.0, 0.25, 1460, 44.0, 0.18], ["B1", "III", 4.93, 0.2, 1180, 23.0, 0.14], ["B1.5", "III", 4.86, 0.15, 960, 11.4, 0.1], ["B2", "III", 4.78, 0.11, 750, 5.1, 0.07]]
TAB_OBI_S=[["ST", "LC", "log L", "Mdot", "V", "Lw", "eta"], ["O3", "I", 5.99, 13.0, 3160, 10709.1, 2.08], ["O3.5", "I", 5.96, 11.3, 3080, 8843.4, 1.89], ["O4", "I", 5.93, 10.0, 2990, 7375.3, 1.74], ["O4.5", "I", 5.9, 8.9, 2870, 6047.7, 1.59], ["O5", "I", 5.87, 8.0, 2760, 5027.4, 1.47], ["O5.5", "I", 5.84, 7.1, 2650, 4113.3, 1.35], ["O6", "I", 5.81, 6.4, 2560, 3460.2, 1.26], ["O6.5", "I", 5.78, 5.7, 2460, 2845.7, 1.15], ["O7", "I", 5.75, 5.0, 2320, 2220.2, 1.02], ["O7.5", "I", 5.72, 4.3, 2210, 1732.6, 0.9], ["O8", "I", 5.68, 3.6, 2100, 1309.7, 0.78], ["O8.5", "I", 5.65, 3.0, 1960, 950.8, 0.65], ["O9", "I", 5.61, 2.5, 1820, 683.2, 0.55], ["O9.5", "I", 5.57, 1.9, 1660, 431.9, 0.42]]
TAB_OIII_KV=[["T", "M", "log L", "Mdot", "Vw", "Lw", "eta"], [30000, 19.3, 5.1, "1.6e-7", 2070, 56.6, "1.30e-1"], [32500, 22.8, 5.25, "3.7e-7", 1470, 66.0, "1.51e-1"], [35000, 27.2, 5.41, "8.0e-7", 1200, 95.0, "1.85e-1"], [37500, 32.5, 5.57, "1.5e-6", 1620, 324.8, "3.24e-1"], [40000, 39.2, 5.71, "2.7e-6", 1320, 388.1, "3.44e-1"], [42500, 47.4, 5.85, "4.5e-6", 1200, 534.6, "3.77e-1"]]
TAB_OI_KV=[["T", "M", "log L", "Mdot", "Vw", "Lw", "eta"], [30000, 28.8, 5.56, "9.9e-7", 1110, 100.6, "1.50e-1"], [32500, 34.0, 5.66, "1.7e-6", 1140, 182.3, "2.10e-1"], [35000, 40.4, 5.75, "2.6e-6", 1350, 390.9, "3.09e-1"], [37500, 48.3, 5.84, "3.7e-6", 1260, 484.6, "3.33e-1"], [40000, 58.1, 5.92, "4.7e-6", 1460, 826.5, "4.08e-1"], [42500, 70.3, 6.0, "5.6e-6", 1350, 842.0, "3.74e-1"]]
TAB_OV_KV=[["T", "M", "log L", "Mdot", "Vw", "Lw", "eta"], [30000, 12.9, 4.5, "1.3e-8", 2440, 6.4, "4.96e-2"], [32500, 16.4, 4.74, "4.2e-8", 1900, 12.5, "7.18e-2"], [35000, 20.9, 4.97, "1.2e-7", 1220, 14.7, "7.76e-2"], [37500, 26.8, 5.19, "3e-7", 1770, 77.5, "1.70e-1"], [40000, 34.6, 5.42, "7.3e-7", 1960, 231.4, "2.69e-1"], [42500, 45.0, 5.64, "1.6e-6", 1910, 481.5, "3.46e-1"]]
TAB_B_KV1=[["Model", "ST", "Teff", "M", "log L", "Gamma", "Vesc", "Vw", "Mdot", "Lw", "eta"], ["T30", "B0", 30000, 14.73, 4.39, 0.0382, 965, 2509, -8.06, 4.52, "4.40e-2"], ["T28", "", 28000, 12.69, 4.2, 0.0286, 938, 2439, -8.51, 1.52, "2.35e-2"], ["T26", "B1", 26000, 10.88, 3.99, 0.0206, 913, 2374, -9.03, 0.43, "1.12e-2"], ["T24", "", 24000, 9.26, 3.77, 0.0146, 886, 2304, -9.61, 0.11, "4.75e-3"]]
TAB_B_KV2=[["Model", "ST", "Teff", "M", "log L", "Gamma", "Vesc", "Vw", "Mdot", "Lw", "eta", "Tjump"], ["T22", "", 22000, 7.84, 3.54, 0.0101, 855, 1112, -8.79, 0.17, "2.57e-2", 22.7], ["T20", "", 20000, 6.6, 3.3, 0.0069, 820, 1066, -9.26, 0.05, "1.45e-2", 22.7], ["T18", "", 18000, 5.52, 3.03, 0.0044, 789, 1026, -9.81, 0.01, "7.34e-3", 22.6], ["T16", "B5", 16000, 4.58, 2.75, 0.0028, 751, 976, -10.37, "3.4e-3", "3.66e-3", 22.6], ["T14", "B6", 14000, 3.76, 2.43, 0.0016, 717, 932, -11.03, "6.7e-4", "1.60e-3", 22.6]]
TAB_OIII_K=[["T", "M", "log L", "Mdot", "Vw", "Lw", "eta"], [30000, 19.3, 5.1, "6.2e-8", 2070, 21.9, "5.04e-2"], [32500, 22.8, 5.25, "1.2e-7", 1470, 21.4, "4.91e-2"], [35000, 27.2, 5.41, "2.4e-7", 1200, 28.5, "5.54e-2"], [37500, 32.5, 5.57, "4.2e-7", 1620, 90.9, "9.06e-2"], [40000, 39.2, 5.71, "9.3e-7", 1320, 133.7, "1.18e-1"], [42500, 47.4, 5.85, "1.5e-6", 1200, 178.2, "1.26e-1"]]
TAB_OI_K=[["T", "M", "log L", "Mdot", "Vw", "Lw", "eta"], [30000, 28.8, 5.56, "4.5e-7", 1110, 45.7, "6.80e-2"], [32500, 34.0, 5.66, "5.7e-7", 1140, 61.1, "7.03e-2"], [35000, 40.4, 5.75, "6.9e-7", 1350, 103.7, "8.19e-2"], [37500, 48.3, 5.84, "1.2e-6", 1260, 157.2, "1.08e-1"], [40000, 58.1, 5.92, "1.4e-6", 1460, 246.2, "1.22e-1"], [42500, 70.3, 6.0, "1.8e-6", 1350, 270.6, "1.20e-1"]]
TAB_B_K=[["Model", "ST", "Teff", "M", "log L", "Mdot", "V", "Lw", "eta"], ["T30", "B0", 30000, 14.73, 4.39, 210, 3650, 2.3, "1.54e-2"], ["T28", "", 28000, 12.69, 4.2, 160, 4380, 2.5, "2.19e-2"], ["T26", "B1", 26000, 10.88, 3.99, 96, 3070, 0.7, "1.49e-2"], ["T24", "", 24000, 9.26, 3.77, 39, 1700, "9e-2", "5.57e-3"], ["T22", "", 22000, 7.84, 3.54, 7.9, 1690, "2e-2", "1.90e-3"], ["T20", "", 20000, 6.6, 3.3, 3.4, 1290, "5e-3", "1.09e-3"], ["T18", "", 18000, 5.52, 3.03, 0.91, 820, "5e-4", "3.44e-4"], ["T16", "B5", 16000, 4.58, 2.75, 0.072, 240, "3e-6", "1.52e-5"], ["T14", "B6", 14000, 3.76, 2.43, 0, 0, 0.0, "0e0"]]
TAB_OV_K=[["T", "M", "log L", "Mdot", "Vw", "Lw", "eta"], [30000, 12.9, 4.5, "1.0e-8", 2440, 4.9, "3.82e-2"], [32500, 16.4, 4.74, "1.4e-8", 1900, 4.2, "2.39e-2"], [35000, 20.9, 4.97, "3.8e-8", 1220, 4.7, "2.46e-2"], [37500, 26.8, 5.19, "1.1e-7", 1770, 28.4, "6.22e-2"], [40000, 34.6, 5.42, "2.5e-7", 1960, 79.2, "9.21e-2"], [42500, 45.0, 5.64, "4.5e-7", 1910, 135.4, "9.74e-2"]]
import sys
import numpy as np
from astropy.table import Table
from matplotlib import pyplot as plt
import seaborn as sns

intabs = {
    "B-krticka": TAB_B_K,
    "O-V-krticka": TAB_OV_K,
    "O-III-krticka": TAB_OIII_K,
    "O-I-krticka": TAB_OI_K,
    "B-krticka-vink-hot": TAB_B_KV1,
    "B-krticka-vink-cool": TAB_B_KV2,
    "O-V-krticka-vink": TAB_OV_KV,
    "O-III-krticka-vink": TAB_OIII_KV,
    "O-I-krticka-vink": TAB_OI_KV,
    "OB-V-smith": TAB_OBV_S, 
    "OB-III-smith": TAB_OBIII_S,
    "OB-I-smith": TAB_OBI_S,
    "MM-vink": TAB_MM_V,
    "O-V-martins-vink": TAB_OV_MV,
    "O-III-martins-vink": TAB_OIII_MV,
    "O-I-martins-vink": TAB_OI_MV,
}
tabs = {}
for key, intab in intabs.items():
    tabs[key] = Table(rows=intab[1:], names=intab[0])
    tabs[key]['eta'] = tabs[key]['eta'].astype('float')

plotfile = sys.argv[0].replace(".py", ".pdf")

fig, ax = plt.subplots()

sns.set_color_codes()

color_dict = {
    "krticka": "r",
    "smith": "0.8",
    "vink": "c",
}


star_data = {
    "MS10": [6.3e3, 0.0066],
    "MS20": [5.453e4, 0.1199],
    "MS30": [2.219e5, 0.4468],
}

for name, tab in tabs.items():
    L = 10**tab["log L"]
    eta = tab["eta"]
    for k, v in color_dict.items():
        if k in name:
            c = v
    plt.plot(L, eta, '-', color=c, lw=3, alpha=0.6)

for name, [L, eta] in star_data.items():
    plt.plot(L, eta, 'o', color='k')

ax.set(
    xlabel=r"Stellar luminosity, $L/L_\odot$",
    ylabel=r"Wind momentum efficiency, $\eta$",
    xscale="log",
    yscale="log",
    xlim=[150, 2.e7],
    ylim=[3e-6, 5.0],
)

fig.savefig(plotfile)
print(plotfile, end="")
